<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.board.user.mapper.UserMapper">
	
	
	<resultMap type="java.util.HashMap" id="getUserMap">
	<result property="userid"   column="userid"/>
	<result property="passwd"   column="passwd"/>
	<result property="username" column="username"/>
	<result property="email"    column="email"/>
	<result property="upt"      column="upt"/>
	<result property="upoint"   column="upoint"/>
	<result property="indate"   column="indate"/>	
	</resultMap>


	<select id="getUserList" resultType ="com.board.user.domain.UserVo">
		SELECT  USERID,
       			USERNAME,
       			EMAIL,
       			
      			 <!-- CASE
         			WHEN  UPOINT BETWEEN 8001 AND 9999999999 THEN 'VIP'
         			WHEN  UPOINT BETWEEN 6001 AND 8000  THEN '우수회원'
        		    WHEN  UPOINT BETWEEN 4001 AND 6000  THEN '일반회원'
         			WHEN  UPOINT BETWEEN 2001 AND 4000  THEN '준회원'
         			WHEN  UPOINT BETWEEN 0    AND 2000  THEN '손님'
         			END  -->      UPOINT
       			,
       			TO_CHAR(INDATE,'YYYY-MM-DD') INDATE
		FROM  USERS 
		ORDER BY USERID ASC
	</select>
	
	<select id="getUser" resultMap="getUserMap">
		SELECT USERID,
			   PASSWD,
			   USERNAME,
			   EMAIL,
			   CASE
         			WHEN  UPOINT BETWEEN 8001 AND 9999999999 THEN 'VIP'
         			WHEN  UPOINT BETWEEN 6001 AND 8000  THEN '우수회원'
        		    WHEN  UPOINT BETWEEN 4001 AND 6000  THEN '일반회원'
         			WHEN  UPOINT BETWEEN 2001 AND 4000  THEN '준회원'
         			WHEN  UPOINT BETWEEN 0    AND 2000  THEN '손님'
         			END UPT,
			   UPOINT,
			   TO_CHAR(INDATE,'YYYY-MM-DD HH24:MI:SS') INDATE
		FROM   USERS
		WHERE  USERID = #{userid}	   
			   
	
	
	
	</select>
	
	
	
	
	<insert id="insertUser">
		INSERT INTO USERS(
		USERID,
		PASSWD,
		USERNAME,
		EMAIL,
		UPOINT,
		INDATE
		)
		VALUES(
		#{ userid },
		#{ passwd },
		#{ username },
		#{ email },
		0,
		SYSDATE
		)
	
	
	</insert>
	
	
	<update id="updateUser">
    UPDATE   USERS
    SET     
    PASSWD   = #{ passwd },
    USERNAME = #{ username },
    EMAIL    = #{ email },
    UPOINT   = #{ upoint }
    WHERE USERID = #{ userid }
	
	
	</update>
	
	<delete id="deleteUser">
	DELETE FROM USERS
	WHERE  USERID = #{userid}
	
	
	</delete>
  
</mapper>  	